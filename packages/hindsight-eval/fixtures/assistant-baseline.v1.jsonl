{"id":"fur-001","scenario":"follow_up_recall","description":"Recall a user preference mentioned in prior conversation","seedFacts":[{"content":"User prefers dark mode in all applications","factType":"experience","confidence":0.95,"entities":["User"],"tags":["preference"]},{"content":"User works primarily with TypeScript and React","factType":"experience","confidence":0.9,"entities":["User","TypeScript","React"],"tags":["tech-stack"]},{"content":"User's favorite editor is VS Code with Vim keybindings","factType":"experience","confidence":0.85,"entities":["User","VS Code"],"tags":["tools"]},{"content":"User dislikes auto-formatting on save","factType":"opinion","confidence":0.8,"entities":["User"],"tags":["preference"]},{"content":"User's project uses Bun as the runtime","factType":"world","confidence":1.0,"entities":["Bun"],"tags":["tech-stack"]}],"query":"What are the user's preferences?","expected":{"mustInclude":["dark mode","auto-formatting"]},"constraints":{"topK":10}}
{"id":"fur-002","scenario":"follow_up_recall","description":"Recall a specific technical decision from conversation history","seedFacts":[{"content":"Team decided to use Valibot instead of Zod for schema validation","factType":"world","confidence":1.0,"entities":["Valibot","Zod"],"tags":["decision"]},{"content":"The migration from Zod to Valibot reduced bundle size by 40%","factType":"world","confidence":0.9,"entities":["Zod","Valibot"],"tags":["performance"]},{"content":"All new schemas must use Valibot going forward","factType":"world","confidence":1.0,"entities":["Valibot"],"tags":["decision","policy"]},{"content":"Legacy Zod schemas remain in the auth module until Q2 refactor","factType":"world","confidence":0.85,"entities":["Zod"],"tags":["tech-debt"]},{"content":"Valibot supports Standard Schema v1 spec natively","factType":"world","confidence":1.0,"entities":["Valibot"],"tags":["tech-stack"]}],"query":"Why did we switch from Zod to Valibot?","expected":{"mustInclude":["bundle size","Valibot instead of Zod"]},"constraints":{"topK":10}}
{"id":"fur-003","scenario":"follow_up_recall","description":"Recall debugging context from a prior session","seedFacts":[{"content":"The WebSocket connection drops every 30 seconds due to a proxy timeout","factType":"experience","confidence":0.9,"entities":["WebSocket"],"tags":["bug"]},{"content":"Increasing the proxy keep-alive to 120s fixed the WebSocket drops","factType":"experience","confidence":0.95,"entities":["WebSocket"],"tags":["fix"]},{"content":"The server runs behind an nginx reverse proxy","factType":"world","confidence":1.0,"entities":["nginx"],"tags":["infrastructure"]},{"content":"Server-sent events work fine because they reconnect automatically","factType":"world","confidence":0.85,"entities":["SSE"],"tags":["infrastructure"]}],"query":"What was the WebSocket issue and how did we fix it?","expected":{"mustInclude":["proxy timeout","keep-alive"]},"constraints":{"topK":10}}
{"id":"fur-004","scenario":"follow_up_recall","description":"Recall a debugging workflow from a prior session","seedFacts":[{"content":"The memory leak was traced to unclosed database connections in the connection pool","factType":"experience","confidence":0.95,"entities":["database"],"tags":["bug"]},{"content":"Running the app with --inspect flag and taking heap snapshots revealed the leak","factType":"experience","confidence":0.9,"entities":[],"tags":["debugging"]},{"content":"The fix was adding a finally block to close connections after each query","factType":"experience","confidence":1.0,"entities":["database"],"tags":["fix"]},{"content":"The leak only manifested after 1000+ requests in production","factType":"experience","confidence":0.85,"entities":[],"tags":["bug"]},{"content":"We added a connection pool monitor that logs active connections every 60 seconds","factType":"world","confidence":0.9,"entities":[],"tags":["monitoring"]}],"query":"How did we debug and fix the memory leak?","expected":{"mustInclude":["heap snapshots","finally block","connection pool"]},"constraints":{"topK":10}}
{"id":"fur-005","scenario":"follow_up_recall","description":"Recall deployment preferences discussed earlier","seedFacts":[{"content":"We always deploy to staging first before production","factType":"world","confidence":1.0,"entities":[],"tags":["process"]},{"content":"Blue-green deployments are used to minimize downtime","factType":"world","confidence":0.95,"entities":[],"tags":["infrastructure"]},{"content":"Rollbacks should be triggered if error rate exceeds 1% within 5 minutes","factType":"world","confidence":0.9,"entities":[],"tags":["policy"]},{"content":"Deployment windows are Tuesday through Thursday, 10am-2pm EST","factType":"world","confidence":0.85,"entities":[],"tags":["policy"]},{"content":"Hotfixes can be deployed anytime with two approvers","factType":"world","confidence":0.9,"entities":[],"tags":["policy"]}],"query":"What are our deployment practices?","expected":{"mustInclude":["staging first","blue-green","error rate"]},"constraints":{"topK":10}}
{"id":"tn-001","scenario":"temporal_narrative","description":"Reconstruct a project timeline from memory","seedFacts":[{"content":"Project kickoff meeting held on January 5th","factType":"experience","confidence":1.0,"occurredStart":1736035200000,"entities":["Project"],"tags":["milestone"]},{"content":"Initial architecture review completed January 12th","factType":"experience","confidence":1.0,"occurredStart":1736640000000,"entities":["Project"],"tags":["milestone"]},{"content":"First prototype deployed to staging January 19th","factType":"experience","confidence":1.0,"occurredStart":1737244800000,"entities":["Project"],"tags":["milestone"]},{"content":"User testing began January 26th with 5 beta testers","factType":"experience","confidence":0.95,"occurredStart":1737849600000,"entities":["Project"],"tags":["milestone"]},{"content":"Production release scheduled for February 2nd","factType":"world","confidence":0.9,"occurredStart":1738454400000,"entities":["Project"],"tags":["milestone"]}],"query":"What is the project timeline?","expected":{"mustInclude":["kickoff","architecture review","prototype","user testing","production release"],"orderedHints":["kickoff","architecture review","prototype","user testing","production release"]},"constraints":{"topK":10}}
{"id":"tn-002","scenario":"temporal_narrative","description":"Track evolution of a technical decision over time","seedFacts":[{"content":"Initially chose PostgreSQL for the database layer","factType":"experience","confidence":0.9,"occurredStart":1735689600000,"entities":["PostgreSQL"],"tags":["decision"]},{"content":"Discovered SQLite with WAL mode handles our write patterns better","factType":"experience","confidence":0.85,"occurredStart":1736294400000,"entities":["SQLite"],"tags":["discovery"]},{"content":"Migrated from PostgreSQL to SQLite in week 3","factType":"experience","confidence":1.0,"occurredStart":1736899200000,"entities":["PostgreSQL","SQLite"],"tags":["migration"]},{"content":"Added sqlite-vec extension for vector similarity search","factType":"experience","confidence":0.95,"occurredStart":1737504000000,"entities":["SQLite","sqlite-vec"],"tags":["enhancement"]},{"content":"Current database stack is SQLite with FTS5 and sqlite-vec","factType":"world","confidence":1.0,"occurredStart":1738108800000,"entities":["SQLite","FTS5","sqlite-vec"],"tags":["tech-stack"]}],"query":"How did our database choice evolve?","expected":{"mustInclude":["PostgreSQL","SQLite","WAL mode","sqlite-vec"],"orderedHints":["PostgreSQL","WAL mode","Migrated","sqlite-vec","FTS5"]},"constraints":{"topK":10}}
{"id":"tn-003","scenario":"temporal_narrative","description":"Feature flag rollout timeline","seedFacts":[{"content":"Feature flag system was introduced on March 1st using LaunchDarkly","factType":"experience","confidence":1.0,"occurredStart":1740787200000,"entities":["LaunchDarkly"],"tags":["infrastructure"]},{"content":"First flag dark-mode-v2 was created on March 5th for internal testing","factType":"experience","confidence":0.95,"occurredStart":1741132800000,"entities":["dark-mode-v2"],"tags":["feature-flag"]},{"content":"Rolled out dark-mode-v2 to 10% of users on March 10th","factType":"experience","confidence":0.9,"occurredStart":1741564800000,"entities":["dark-mode-v2"],"tags":["rollout"]},{"content":"Increased dark-mode-v2 to 50% on March 15th after positive feedback","factType":"experience","confidence":0.95,"occurredStart":1741996800000,"entities":["dark-mode-v2"],"tags":["rollout"]},{"content":"Full rollout of dark-mode-v2 to 100% on March 20th","factType":"experience","confidence":1.0,"occurredStart":1742428800000,"entities":["dark-mode-v2"],"tags":["rollout"]}],"query":"How did the dark mode feature flag roll out?","expected":{"mustInclude":["LaunchDarkly","10%","50%","100%"],"orderedHints":["LaunchDarkly","10%","50%","100%"]},"constraints":{"topK":10}}
{"id":"tn-004","scenario":"temporal_narrative","description":"Incident response chronology","seedFacts":[{"content":"Alert fired at 2:15 AM for elevated 500 error rates","factType":"experience","confidence":1.0,"occurredStart":1741058100000,"entities":[],"tags":["incident"]},{"content":"On-call engineer acknowledged the alert at 2:22 AM","factType":"experience","confidence":1.0,"occurredStart":1741058520000,"entities":[],"tags":["incident"]},{"content":"Root cause identified as a bad database migration at 2:45 AM","factType":"experience","confidence":0.95,"occurredStart":1741059900000,"entities":["database"],"tags":["incident"]},{"content":"Rollback of the migration was completed at 3:10 AM","factType":"experience","confidence":1.0,"occurredStart":1741061400000,"entities":["database"],"tags":["incident"]},{"content":"Post-incident review was held on March 5th at 10 AM","factType":"experience","confidence":0.9,"occurredStart":1741168800000,"entities":[],"tags":["incident"]}],"query":"What happened during the March 4th incident?","expected":{"mustInclude":["alert","500 error","bad database migration","rollback","post-incident"],"orderedHints":["alert","acknowledged","root cause","rollback","post-incident"]},"constraints":{"topK":10}}
{"id":"tn-005","scenario":"temporal_narrative","description":"Sprint planning evolution over multiple iterations","seedFacts":[{"content":"Sprint 1 used two-week cycles with daily standups","factType":"experience","confidence":1.0,"occurredStart":1736035200000,"entities":[],"tags":["process"]},{"content":"Sprint 3 switched to one-week cycles after feedback about context switching","factType":"experience","confidence":0.95,"occurredStart":1737244800000,"entities":[],"tags":["process"]},{"content":"Sprint 5 introduced async standups via Slack bot instead of meetings","factType":"experience","confidence":0.9,"occurredStart":1738454400000,"entities":["Slack"],"tags":["process"]},{"content":"Sprint 7 added retrospective action items tracking in Linear","factType":"experience","confidence":0.85,"occurredStart":1739664000000,"entities":["Linear"],"tags":["process"]},{"content":"Sprint 9 adopted shape-up style cool-down weeks between cycles","factType":"experience","confidence":0.9,"occurredStart":1740873600000,"entities":[],"tags":["process"]}],"query":"How has our sprint process changed over time?","expected":{"mustInclude":["two-week","one-week","async standups","retrospective","cool-down"],"orderedHints":["two-week","one-week","async standups","retrospective","cool-down"]},"constraints":{"topK":10}}
{"id":"dc-001","scenario":"dedup_conflict","description":"Handle conflicting facts about the same topic","seedFacts":[{"content":"The API rate limit is 100 requests per minute","factType":"world","confidence":0.9,"entities":["API"],"tags":["config"]},{"content":"The API rate limit was increased to 500 requests per minute after the infrastructure upgrade","factType":"world","confidence":0.95,"entities":["API"],"tags":["config"]},{"content":"Rate limiting is enforced at the nginx level using the limit_req module","factType":"world","confidence":1.0,"entities":["API","nginx"],"tags":["infrastructure"]},{"content":"The API rate limit is 100 requests per minute","factType":"world","confidence":0.8,"entities":["API"],"tags":["config"]},{"content":"Premium tier users have a rate limit of 1000 requests per minute","factType":"world","confidence":0.95,"entities":["API"],"tags":["config"]}],"query":"What is the current API rate limit?","expected":{"mustInclude":["500 requests per minute"],"mustExclude":["The API rate limit is 100 requests per minute"]},"constraints":{"topK":5}}
{"id":"dc-002","scenario":"dedup_conflict","description":"Deduplicate overlapping memory entries","seedFacts":[{"content":"The deployment uses Docker containers on AWS ECS","factType":"world","confidence":1.0,"entities":["Docker","AWS ECS"],"tags":["infrastructure"]},{"content":"We deploy using Docker containers on Amazon ECS","factType":"world","confidence":0.95,"entities":["Docker","Amazon ECS"],"tags":["infrastructure"]},{"content":"The CI/CD pipeline runs on GitHub Actions","factType":"world","confidence":1.0,"entities":["GitHub Actions"],"tags":["infrastructure"]},{"content":"Docker images are built and pushed by GitHub Actions CI/CD","factType":"world","confidence":0.9,"entities":["Docker","GitHub Actions"],"tags":["infrastructure"]},{"content":"Deployments are triggered automatically on merge to main","factType":"world","confidence":1.0,"entities":["GitHub Actions"],"tags":["process"]}],"query":"How does our deployment pipeline work?","expected":{"mustInclude":["Docker","GitHub Actions","merge to main"],"mustExclude":["We deploy using Docker containers on Amazon ECS"]},"constraints":{"topK":5}}
{"id":"dc-003","scenario":"dedup_conflict","description":"Conflicting deployment region information","seedFacts":[{"content":"The application is deployed in us-east-1 region","factType":"world","confidence":0.85,"entities":["AWS"],"tags":["infrastructure"]},{"content":"We migrated the primary deployment to eu-west-1 for GDPR compliance","factType":"world","confidence":0.95,"entities":["AWS"],"tags":["infrastructure"]},{"content":"The application is deployed in us-east-1 region","factType":"world","confidence":0.8,"entities":["AWS"],"tags":["infrastructure"]},{"content":"A CDN edge layer is deployed globally via CloudFront","factType":"world","confidence":1.0,"entities":["CloudFront"],"tags":["infrastructure"]},{"content":"Disaster recovery replica runs in ap-southeast-1","factType":"world","confidence":0.9,"entities":["AWS"],"tags":["infrastructure"]}],"query":"Where is our application deployed?","expected":{"mustInclude":["eu-west-1","GDPR"],"mustExclude":["The application is deployed in us-east-1 region"]},"constraints":{"topK":5}}
{"id":"dc-004","scenario":"dedup_conflict","description":"Overlapping meeting schedule entries","seedFacts":[{"content":"Team standup is at 9:00 AM every weekday","factType":"world","confidence":0.9,"entities":[],"tags":["meeting"]},{"content":"Team standup was moved to 9:30 AM starting February","factType":"world","confidence":0.95,"entities":[],"tags":["meeting"]},{"content":"Team standup is at 9:00 AM every weekday","factType":"world","confidence":0.85,"entities":[],"tags":["meeting"]},{"content":"Design review happens every Wednesday at 2:00 PM","factType":"world","confidence":1.0,"entities":[],"tags":["meeting"]},{"content":"Sprint planning is every other Monday at 10:00 AM","factType":"world","confidence":0.95,"entities":[],"tags":["meeting"]}],"query":"When is the team standup?","expected":{"mustInclude":["9:30 AM","starting February"],"mustExclude":["Team standup is at 9:00 AM every weekday"]},"constraints":{"topK":5}}
{"id":"dc-005","scenario":"dedup_conflict","description":"Superseded configuration values","seedFacts":[{"content":"The max upload file size is 5MB","factType":"world","confidence":0.9,"entities":[],"tags":["config"]},{"content":"Max upload size was increased to 25MB after adding S3 direct upload","factType":"world","confidence":0.95,"entities":["S3"],"tags":["config"]},{"content":"The max upload file size is 5MB","factType":"world","confidence":0.85,"entities":[],"tags":["config"]},{"content":"Images are automatically resized to 1200px max width on upload","factType":"world","confidence":1.0,"entities":[],"tags":["config"]},{"content":"Uploads are virus-scanned by ClamAV before storage","factType":"world","confidence":0.9,"entities":["ClamAV"],"tags":["security"]}],"query":"What is the max file upload size?","expected":{"mustInclude":["25MB","S3 direct upload"],"mustExclude":["The max upload file size is 5MB"]},"constraints":{"topK":5}}
{"id":"clr-001","scenario":"code_location_recall","description":"Recall where specific functionality is implemented","seedFacts":[{"content":"Authentication middleware is defined in packages/auth/src/middleware.ts","factType":"world","confidence":1.0,"entities":["auth"],"tags":["code-location"]},{"content":"The JWT token validation logic lives in packages/auth/src/jwt.ts","factType":"world","confidence":1.0,"entities":["JWT","auth"],"tags":["code-location"]},{"content":"Rate limiting is implemented in packages/api/src/rate-limiter.ts","factType":"world","confidence":1.0,"entities":["rate-limiter"],"tags":["code-location"]},{"content":"Database migrations are stored in packages/db/drizzle/","factType":"world","confidence":1.0,"entities":["database"],"tags":["code-location"]},{"content":"The main server entry point is apps/app/src/server.ts","factType":"world","confidence":1.0,"entities":["server"],"tags":["code-location"]}],"query":"Where is the authentication code?","expected":{"mustInclude":["packages/auth/src/middleware.ts","packages/auth/src/jwt.ts"]},"constraints":{"topK":10}}
{"id":"clr-002","scenario":"code_location_recall","description":"Recall module boundaries and package responsibilities","seedFacts":[{"content":"The @ellie/rpc package handles type-safe RPC with createRouter and createRpcClient","factType":"world","confidence":1.0,"entities":["@ellie/rpc"],"tags":["architecture"]},{"content":"The @ellie/durable-streams package provides the streaming backend with DurableStore","factType":"world","confidence":1.0,"entities":["@ellie/durable-streams"],"tags":["architecture"]},{"content":"The @ellie/agent package contains the stateful AI agent loop and tool execution","factType":"world","confidence":1.0,"entities":["@ellie/agent"],"tags":["architecture"]},{"content":"The @ellie/db package wraps Drizzle ORM with Bun SQLite and JsonlEngine","factType":"world","confidence":1.0,"entities":["@ellie/db"],"tags":["architecture"]},{"content":"The @ellie/hindsight package implements biomimetic agent memory with hybrid retrieval","factType":"world","confidence":1.0,"entities":["@ellie/hindsight"],"tags":["architecture"]}],"query":"What does the @ellie/agent package do?","expected":{"mustInclude":["stateful AI agent","tool execution"]},"constraints":{"topK":10}}
{"id":"clr-003","scenario":"code_location_recall","description":"Recall test file locations","seedFacts":[{"content":"Unit tests for the RPC layer are in packages/rpc/src/test/router.test.ts","factType":"world","confidence":1.0,"entities":["@ellie/rpc"],"tags":["code-location","test"]},{"content":"Integration tests for streams are in packages/durable-streams/src/test/integration.test.ts","factType":"world","confidence":1.0,"entities":["@ellie/durable-streams"],"tags":["code-location","test"]},{"content":"Agent conversation loop tests are in packages/agent/src/test/loop.test.ts","factType":"world","confidence":1.0,"entities":["@ellie/agent"],"tags":["code-location","test"]},{"content":"Database schema tests live in packages/db/src/test/schema.test.ts","factType":"world","confidence":1.0,"entities":["@ellie/db"],"tags":["code-location","test"]},{"content":"End-to-end tests are in apps/app/src/test/e2e/","factType":"world","confidence":1.0,"entities":["e2e"],"tags":["code-location","test"]}],"query":"Where are the tests for the RPC and streaming packages?","expected":{"mustInclude":["packages/rpc/src/test/router.test.ts","packages/durable-streams/src/test/integration.test.ts"]},"constraints":{"topK":10}}
{"id":"clr-004","scenario":"code_location_recall","description":"Recall configuration file locations","seedFacts":[{"content":"Tailwind config is at apps/studio/tailwind.config.ts","factType":"world","confidence":1.0,"entities":["Tailwind"],"tags":["code-location","config"]},{"content":"TypeScript base config is at packages/typescript-config/base.json","factType":"world","confidence":1.0,"entities":["TypeScript"],"tags":["code-location","config"]},{"content":"Turbo pipeline config is at turbo.json in the repo root","factType":"world","confidence":1.0,"entities":["Turbo"],"tags":["code-location","config"]},{"content":"Environment validation schemas are in packages/env/src/schemas.ts","factType":"world","confidence":1.0,"entities":["env"],"tags":["code-location","config"]},{"content":"Drizzle ORM config is at packages/db/drizzle.config.ts","factType":"world","confidence":1.0,"entities":["Drizzle"],"tags":["code-location","config"]}],"query":"Where are the TypeScript and build configuration files?","expected":{"mustInclude":["packages/typescript-config/base.json","turbo.json"]},"constraints":{"topK":10}}
{"id":"clr-005","scenario":"code_location_recall","description":"Recall middleware chain locations","seedFacts":[{"content":"CORS middleware is defined in packages/api/src/middleware/cors.ts","factType":"world","confidence":1.0,"entities":["CORS"],"tags":["code-location","middleware"]},{"content":"Request logging middleware is in packages/api/src/middleware/logger.ts","factType":"world","confidence":1.0,"entities":["logging"],"tags":["code-location","middleware"]},{"content":"Error handling middleware lives in packages/api/src/middleware/error-handler.ts","factType":"world","confidence":1.0,"entities":["error-handling"],"tags":["code-location","middleware"]},{"content":"The middleware composition utility is in packages/api/src/middleware/compose.ts","factType":"world","confidence":1.0,"entities":["middleware"],"tags":["code-location","middleware"]},{"content":"Health check endpoint is at packages/api/src/routes/health.ts","factType":"world","confidence":1.0,"entities":["health"],"tags":["code-location"]}],"query":"Where is the CORS and error handling middleware?","expected":{"mustInclude":["packages/api/src/middleware/cors.ts","packages/api/src/middleware/error-handler.ts"]},"constraints":{"topK":10}}
{"id":"tbp-001","scenario":"token_budget_packing","description":"Pack maximum relevant facts within a tight token budget","seedFacts":[{"content":"The server uses Bun HTTP with a custom router","factType":"world","confidence":1.0,"entities":["Bun"],"tags":["tech-stack"]},{"content":"WebSocket connections are managed via Durable Streams protocol","factType":"world","confidence":1.0,"entities":["WebSocket","Durable Streams"],"tags":["tech-stack"]},{"content":"The frontend is React 19 with TanStack Router for navigation","factType":"world","confidence":1.0,"entities":["React","TanStack Router"],"tags":["tech-stack"]},{"content":"State management uses TanStack DB for reactive collections","factType":"world","confidence":1.0,"entities":["TanStack DB"],"tags":["tech-stack"]},{"content":"The test runner is Bun's built-in test framework","factType":"world","confidence":1.0,"entities":["Bun"],"tags":["tools"]},{"content":"Formatting is handled by Prettier with default config","factType":"world","confidence":0.9,"entities":["Prettier"],"tags":["tools"]},{"content":"Linting uses oxlint for fast TypeScript linting","factType":"world","confidence":0.95,"entities":["oxlint"],"tags":["tools"]}],"query":"What is the tech stack?","expected":{"mustInclude":["Bun","React 19","TanStack"]},"constraints":{"topK":10,"tokenBudget":200}}
{"id":"tbp-002","scenario":"token_budget_packing","description":"Extremely tight budget forces prioritization of most relevant facts","seedFacts":[{"content":"User's name is Alice and she is a senior engineer","factType":"experience","confidence":1.0,"entities":["Alice"],"tags":["profile"]},{"content":"Alice prefers functional programming patterns over OOP","factType":"opinion","confidence":0.9,"entities":["Alice"],"tags":["preference"]},{"content":"Alice has 8 years of experience with JavaScript","factType":"world","confidence":0.95,"entities":["Alice","JavaScript"],"tags":["profile"]},{"content":"Alice is currently leading the migration to TypeScript 5.9","factType":"experience","confidence":1.0,"entities":["Alice","TypeScript"],"tags":["project"]},{"content":"Alice's team meets every Tuesday for sprint planning","factType":"world","confidence":0.85,"entities":["Alice"],"tags":["process"]},{"content":"Alice previously worked at Google on the V8 team","factType":"world","confidence":0.9,"entities":["Alice","Google","V8"],"tags":["career"]},{"content":"Alice is allergic to cats","factType":"world","confidence":0.7,"entities":["Alice"],"tags":["personal"]},{"content":"Alice commutes by bicycle 3 days a week","factType":"world","confidence":0.6,"entities":["Alice"],"tags":["personal"]}],"query":"Tell me about Alice's engineering background","expected":{"mustInclude":["senior engineer","JavaScript","TypeScript"]},"constraints":{"topK":5,"tokenBudget":100}}
{"id":"tbp-003","scenario":"token_budget_packing","description":"Tight budget with many user preferences to pack","seedFacts":[{"content":"User prefers tabs over spaces with width of 2","factType":"opinion","confidence":0.95,"entities":["User"],"tags":["preference"]},{"content":"User wants all imports sorted alphabetically","factType":"opinion","confidence":0.9,"entities":["User"],"tags":["preference"]},{"content":"User prefers named exports over default exports","factType":"opinion","confidence":0.85,"entities":["User"],"tags":["preference"]},{"content":"User always uses const instead of let when possible","factType":"opinion","confidence":0.9,"entities":["User"],"tags":["preference"]},{"content":"User avoids classes in favor of plain functions","factType":"opinion","confidence":0.8,"entities":["User"],"tags":["preference"]},{"content":"User likes to use early returns to reduce nesting","factType":"opinion","confidence":0.85,"entities":["User"],"tags":["preference"]}],"query":"What are the user's coding style preferences?","expected":{"mustInclude":["tabs","named exports","early returns"]},"constraints":{"topK":5,"tokenBudget":80}}
{"id":"tbp-004","scenario":"token_budget_packing","description":"Budget with mixed-relevance facts about project setup","seedFacts":[{"content":"The project uses pnpm workspaces for package management","factType":"world","confidence":1.0,"entities":["pnpm"],"tags":["tools"]},{"content":"CI runs on GitHub Actions with a matrix strategy","factType":"world","confidence":0.95,"entities":["GitHub Actions"],"tags":["infrastructure"]},{"content":"The team celebrates birthdays with cake on Fridays","factType":"world","confidence":0.5,"entities":[],"tags":["culture"]},{"content":"Docker images are based on the official Node 20 alpine image","factType":"world","confidence":0.9,"entities":["Docker","Node"],"tags":["infrastructure"]},{"content":"The office coffee machine was recently upgraded","factType":"world","confidence":0.3,"entities":[],"tags":["culture"]},{"content":"Pre-commit hooks run lint and type-check via husky","factType":"world","confidence":0.95,"entities":["husky"],"tags":["tools"]}],"query":"How is the project CI/CD set up?","expected":{"mustInclude":["GitHub Actions","Docker","husky"]},"constraints":{"topK":5,"tokenBudget":120}}
{"id":"tbp-005","scenario":"token_budget_packing","description":"Minimal budget forcing top-1 selection","seedFacts":[{"content":"The production database connection string uses SSL mode require","factType":"world","confidence":1.0,"entities":["database"],"tags":["config"]},{"content":"Database backups run every 6 hours to S3","factType":"world","confidence":0.95,"entities":["database","S3"],"tags":["infrastructure"]},{"content":"The database uses connection pooling with max 20 connections","factType":"world","confidence":0.9,"entities":["database"],"tags":["config"]},{"content":"Read replicas are used for analytics queries","factType":"world","confidence":0.85,"entities":["database"],"tags":["infrastructure"]},{"content":"Database schema migrations are managed by Drizzle Kit","factType":"world","confidence":1.0,"entities":["Drizzle"],"tags":["tools"]}],"query":"How is the production database configured?","expected":{"mustInclude":["SSL","connection pooling"]},"constraints":{"topK":3,"tokenBudget":50}}
